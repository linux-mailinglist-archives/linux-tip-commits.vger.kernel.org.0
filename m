Return-Path: <linux-tip-commits-owner@vger.kernel.org>
X-Original-To: lists+linux-tip-commits@lfdr.de
Delivered-To: lists+linux-tip-commits@lfdr.de
Received: from vger.kernel.org (vger.kernel.org [23.128.96.18])
	by mail.lfdr.de (Postfix) with ESMTP id 6554F3DC01E
	for <lists+linux-tip-commits@lfdr.de>; Fri, 30 Jul 2021 23:10:40 +0200 (CEST)
Received: (majordomo@vger.kernel.org) by vger.kernel.org via listexpand
        id S231984AbhG3VKo (ORCPT <rfc822;lists+linux-tip-commits@lfdr.de>);
        Fri, 30 Jul 2021 17:10:44 -0400
Received: from lindbergh.monkeyblade.net ([23.128.96.19]:59482 "EHLO
        lindbergh.monkeyblade.net" rhost-flags-OK-OK-OK-OK) by vger.kernel.org
        with ESMTP id S231982AbhG3VKo (ORCPT
        <rfc822;linux-tip-commits@vger.kernel.org>);
        Fri, 30 Jul 2021 17:10:44 -0400
Received: from galois.linutronix.de (Galois.linutronix.de [IPv6:2a0a:51c0:0:12e:550::1])
        by lindbergh.monkeyblade.net (Postfix) with ESMTPS id 4ED25C061765;
        Fri, 30 Jul 2021 14:10:39 -0700 (PDT)
Date:   Fri, 30 Jul 2021 21:10:35 -0000
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed; d=linutronix.de;
        s=2020; t=1627679436;
        h=from:from:sender:sender:reply-to:reply-to:subject:subject:date:date:
         message-id:message-id:to:to:cc:cc:mime-version:mime-version:
         content-type:content-type:  content-transfer-encoding:content-transfer-encoding;
        bh=qMLj7LoyKYMS7jxdCGqk9QKiXWPC4NuhSIGwaA6lW2U=;
        b=naKH4D3FibfFDBa0cEljlmlfJkBWop6acTRZ40KDcTqBIHjpfA3ipvRxRqvNpe2QWv632n
        yNi4HE0YEOMjp7UEbxH+gGi/K8a0MzfXPnFVasLcsyLMra64DCIArABeGU/AP0KPc+YB+f
        Nm1vkShJ6JFS+of7RsymB3uGUXsk6TPqZuLGpssC6ZJioXgaSBy0F0Qh5+6tz+EyFCnsk+
        iXAuSY5lxk/BRbv4QLj+e/cCblVQ5d3DkJvNU2zSHNYKd7LVvG9zTfdx+5/Ahl8gmMqTcN
        4BjcOD7GVcZvaUAaaFEzvfasy4utZmo6J6zFEI2u3XANWM1c+VYBxdiI1txwZA==
DKIM-Signature: v=1; a=ed25519-sha256; c=relaxed/relaxed; d=linutronix.de;
        s=2020e; t=1627679436;
        h=from:from:sender:sender:reply-to:reply-to:subject:subject:date:date:
         message-id:message-id:to:to:cc:cc:mime-version:mime-version:
         content-type:content-type:  content-transfer-encoding:content-transfer-encoding;
        bh=qMLj7LoyKYMS7jxdCGqk9QKiXWPC4NuhSIGwaA6lW2U=;
        b=XINCMXWg2rW2UlCmCw7nxp/3XOB4l3m/BiaAYUpAMnCIi3E88tBySfnblZHzq6XRfZKalp
        sr106biNvoRfW9CA==
From:   tip-bot2 for =?utf-8?q?C=C3=A9dric?= Le Goater 
        <tip-bot2@linutronix.de>
Sender: tip-bot2@linutronix.de
Reply-to: linux-kernel@vger.kernel.org
To:     linux-tip-commits@vger.kernel.org
Subject: [tip: irq/core] genirq: Improve "hwirq" output in /proc and /sys/
Cc:     clg@kaod.org, Thomas Gleixner <tglx@linutronix.de>, x86@kernel.org,
        linux-kernel@vger.kernel.org, maz@kernel.org
MIME-Version: 1.0
Message-ID: <162767943540.395.16803004880839169459.tip-bot2@tip-bot2>
Robot-ID: <tip-bot2@linutronix.de>
Robot-Unsubscribe: Contact <mailto:tglx@linutronix.de> to get blacklisted from these emails
Content-Type: text/plain; charset="utf-8"
Content-Transfer-Encoding: quoted-printable
Precedence: bulk
List-ID: <linux-tip-commits.vger.kernel.org>
X-Mailing-List: linux-tip-commits@vger.kernel.org

The following commit has been merged into the irq/core branch of tip:

Commit-ID:     d92df42d7685445a2b6c815d9230d9699d9d400b
Gitweb:        https://git.kernel.org/tip/d92df42d7685445a2b6c815d9230d9699d9=
d400b
Author:        C=C3=A9dric Le Goater <clg@kaod.org>
AuthorDate:    Thu, 01 Jul 2021 15:27:50 +02:00
Committer:     Thomas Gleixner <tglx@linutronix.de>
CommitterDate: Fri, 30 Jul 2021 23:07:31 +02:00

genirq: Improve "hwirq" output in /proc and /sys/

The HW IRQ numbers generated by the PCI MSI layer can be quite large
on a pSeries machine when running under the IBM Hypervisor and they
appear as negative. Use '%lu' instead to show them correctly.

Signed-off-by: C=C3=A9dric Le Goater <clg@kaod.org>
Signed-off-by: Thomas Gleixner <tglx@linutronix.de>

---
 kernel/irq/irqdesc.c | 2 +-
 kernel/irq/proc.c    | 2 +-
 2 files changed, 2 insertions(+), 2 deletions(-)

diff --git a/kernel/irq/irqdesc.c b/kernel/irq/irqdesc.c
index fadb937..4e3c29b 100644
--- a/kernel/irq/irqdesc.c
+++ b/kernel/irq/irqdesc.c
@@ -188,7 +188,7 @@ static ssize_t hwirq_show(struct kobject *kobj,
=20
 	raw_spin_lock_irq(&desc->lock);
 	if (desc->irq_data.domain)
-		ret =3D sprintf(buf, "%d\n", (int)desc->irq_data.hwirq);
+		ret =3D sprintf(buf, "%lu\n", desc->irq_data.hwirq);
 	raw_spin_unlock_irq(&desc->lock);
=20
 	return ret;
diff --git a/kernel/irq/proc.c b/kernel/irq/proc.c
index 7c5cd42..ee595ec 100644
--- a/kernel/irq/proc.c
+++ b/kernel/irq/proc.c
@@ -513,7 +513,7 @@ int show_interrupts(struct seq_file *p, void *v)
 		seq_printf(p, " %8s", "None");
 	}
 	if (desc->irq_data.domain)
-		seq_printf(p, " %*d", prec, (int) desc->irq_data.hwirq);
+		seq_printf(p, " %*lu", prec, desc->irq_data.hwirq);
 	else
 		seq_printf(p, " %*s", prec, "");
 #ifdef CONFIG_GENERIC_IRQ_SHOW_LEVEL
